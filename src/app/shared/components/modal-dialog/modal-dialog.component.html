<h2 mat-dialog-title>{{data.title}}</h2>
<mat-dialog-content>
    <form [formGroup]="form">

        @for(field of fields; track field.name){
        <mat-form-field class="full-width">
            <mat-label>{{field.label}}</mat-label>

            @if(field.type === 'date') {
            <ng-container>
                <input matInput [matDatepicker]="datepicker" [formControlName]="field.name">
                <mat-datepicker #datepicker />
                <mat-datepicker-toggle [for]="datepicker" matSuffix />
            </ng-container>
            }

            @if(field.type === 'time') {
            <ng-container>
                <input matInput [matTimepicker]="timepicker" [formControlName]="field.name">
                <mat-timepicker #timepicker />
                <mat-timepicker-toggle [for]="timepicker" matSuffix />
            </ng-container>
            }

            @if(!field.type || field.type === 'text' || field.type === 'number') {
            <input matInput [type]="field.type || 'text'" [formControlName]="field.name" />
            }

            @if(field.button) {
            <button mat-icon-button matSuffix (click)="field.button.callback(form.get(field.name)?.value, dialogRef)">
                <mat-icon>{{field.button.icon}}</mat-icon>
            </button>
            }

        </mat-form-field>
        }

    </form>
</mat-dialog-content>
<mat-dialog-actions>
    <button mat-button (click)="onCancel()">Candelar</button>
    <button mat-button (click)="onSave()">Ok</button>
</mat-dialog-actions>